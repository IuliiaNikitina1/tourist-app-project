<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Составьте маршрут</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../App.css" />
    <script
      src="https://api-maps.yandex.ru/2.1/?apikey=0f2e41fe-fa5c-4a81-adb5-58e427e6b51a&lang=ru_RU"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      ymaps.ready(init);
      function init() {
        var myMap = new ymaps.Map("map", {
          center: [59.94, 30.3],
          zoom: 12,
          controls: ["zoomControl", "fullscreenControl"],
        });

        let museums_points = JSON.parse(localStorage.getItem("saved_museums"));
        let squares_points = JSON.parse(localStorage.getItem("saved_squares"));
        let cathedrals_points = JSON.parse(localStorage.getItem("saved_cathedrals"));
        let markets_points = JSON.parse(localStorage.getItem("saved_markets"));
        let theatres_points = JSON.parse(localStorage.getItem("saved_theatres"));
        let parks_points = JSON.parse(localStorage.getItem("saved_parks"));
        let monuments_points = JSON.parse(localStorage.getItem("saved_monuments"));

        // const points = (museums_points.concat(squares_points, cathedrals_points, markets_points, theatres_points, parks_points, monuments_points)).filter((point) => point !== null);
        // const places = [];
        // Sights.map((sight) => {
        //     const { coords, id } = sight;
        //     if (points.includes(id)) {
        //         places.push(coords);
        //     }
        // });
        

        // var myPlacemark = new ymaps.Placemark([59.939864, 30.314566]);
        // myMap.geoObjects.add(myPlacemark);

        var multiRoute = new ymaps.multiRouter.MultiRoute(
          {
            // Точки маршрута. Точки могут быть заданы как координатами, так и адресом.
            referencePoints: [
              [59.939864, 30.314566],
              [59.934345, 30.324611],
              [59.927394, 30.331054],
              [59.943553, 30.331705],
            ],
            params: {
                    //Тип маршрутизации - пешеходная маршрутизация.
                    routingMode: 'pedestrian'
                }
          },
          {
            // Автоматически устанавливать границы карты так,
            // чтобы маршрут был виден целиком.
            boundsAutoApply: true,
            routeActiveStrokeWidth: 6,
            routeActiveStrokeStyle: "solid",
            routeActiveStrokeColor: "#111111",
          }
        );

        // Добавление маршрута на карту.
        myMap.geoObjects.add(multiRoute);
      }
    </script>
  </head>

  <body>
    
    <p classname="header-top__title">
        Ваше путешествие в Санкт-Петербург
    </p>

    <div classname="map-page__container">
      <div id="map" style="width: 600px; height: 400px"></div>
    </div>
  </body>
</html>
